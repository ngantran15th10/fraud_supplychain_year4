KẾT QUẢ PHÂN TÍCH - DATASET VÀ NETWORK CONSTRUCTION
Generated: 2025-10-26

============================================================
PHẦN 1: VỀ DATASET
============================================================

-----------------------------------------
Q1.1: DataCo dataset có cấu trúc như thế nào?
-----------------------------------------
- Tổng số transactions: 180,519
- Tổng số unique customers: 20,652
- Tổng số unique products: 118

- Fraud label (chính): chọn "Order Status = SUSPECTED_FRAUD" (mục tiêu: rõ ràng, không quá imbalanced)
  • Số transactions có Order Status = SUSPECTED_FRAUD: 4,062
  • Fraud rate (theo Order Status = SUSPECTED_FRAUD): 4,062 / 180,519 = 2.25%

- Một số indicator phụ (thông tin thêm):
  • Late_delivery_risk = 1: 98,977 transactions (54.83%)
  • Benefit per order < 0: 33,784 transactions (18.71%)
  • Nếu kết hợp nhiều indicator, tỷ lệ "suspicious" tăng (ví dụ kết hợp các điều kiện trong phân tích trước dẫn tới ~67.10% — nhưng đó là một định nghĩa rất lỏng và không nên dùng làm ground truth cho model chính)

-----------------------------------------
Q1.2: Dataset có phù hợp để build network không?
-----------------------------------------
A. Có đủ thông tin về relationships không?
- Có. Dataset chứa cột `Customer Id` và `Product Card Id` cho mỗi transaction: đây là mối quan hệ khách hàng ↔ sản phẩm (user-item) rất rõ ràng.
- Ngoài ra có `order date` để gán thời điểm cho edge, `Sales`/`Order Item Quantity` cho trọng số/thuộc tính edge, và `Order Status` để gán label fraud cho edge.
- Do đó dataset có all fields cần thiết để xây dựng bipartite network (Customer nodes, Product nodes, edges = transactions).

B. Có thể tạo nodes và edges không?
- Có thể: đã tạo `edgelist.csv` (cột: customer_id, product_id, sales, quantity, order_date, order_status, is_fraud).
- Từ `edgelist.csv` đã xây dựng `bipartite_graph.gpickle` (graph object) và `graph_info.pkl` (metadata summary).

C. Ghi chú về chất lượng và lưu ý:
- Dataset có số lượng transactions lớn (180k) và số customer vừa phải (20k) — phù hợp để phân tích network và tính centrality/communities.
- Network khá sparse (density ≈ 0.000469), có nhiều component nhưng vẫn có một largest component lớn (12,431 nodes) — thuận lợi cho phân tích cộng đồng và centrality.
- Fraud label rõ ràng (Order Status = SUSPECTED_FRAUD) tỉ lệ ~2.25% — đây là một lựa chọn hợp lý để làm ground truth nếu bạn muốn tránh quá nhiều imbalance khi huấn luyện mô hình. Nếu bạn muốn tăng recall, có thể thử labels mở rộng (kết hợp Late_delivery_risk, Benefit âm), nhưng cần lưu ý bias và mục tiêu nghiên cứu.

-----------------------------------------
Q1.3: Những file hiện có và vai trò
-----------------------------------------
- data/edgelist.csv           -> danh sách giao dịch (edge list) đã rút gọn
- data/bipartite_graph.gpickle-> object network đã build (dùng cho tính centrality, community, path, viz)
- data/graph_info.pkl         -> metadata nhanh (số nodes, edges, density, components)
- data/network_features.csv   -> features per-customer (degree, betweenness, closeness, community)
- data/network_features_dict.pkl -> 4 dictionaries (degree, betweenness, closeness, community)
- RESULTS_SUMMARY.txt         -> tóm tắt phân bố và ghi chú (đã tạo trước đó)

============================================================
PHẦN 2: VỀ NETWORK CONSTRUCTION
============================================================

-----------------------------------------
Q2.1: Loại network nào phù hợp với supply chain data?
-----------------------------------------

A. Tại sao chọn bipartite network?
- Supply chain data có 2 loại entities khác nhau: CUSTOMERS và PRODUCTS
- Mỗi transaction tạo kết nối giữa 1 customer và 1 product
- Đây là cấu trúc bipartite tự nhiên:
  • Set 0: Customer nodes (20,652 nodes)
  • Set 1: Product nodes (118 nodes)
  • Edges: Chỉ nối giữa customer ↔ product (không có customer-customer hay product-product)

B. So sánh với các loại network khác:
- Unipartite network (1 loại node):
  • Ví dụ: customer-customer network (nối customers mua cùng product)
  • Mất đi thông tin trực tiếp về products
  • Phải dùng projection → mất thông tin

- Directed network:
  • Không cần thiết vì mối quan hệ customer-product là đối xứng
  • Có thể dùng nếu muốn model transaction flow theo thời gian

- Multipartite network:
  • Có thể mở rộng thêm: Customer ↔ Product ↔ Supplier ↔ Location
  • Nhưng dataset hiện tại chưa có thông tin đầy đủ về suppliers

→ Bipartite network là lựa chọn TỐI ƯU cho supply chain fraud detection!

-----------------------------------------
Q2.2: Network có những đặc điểm gì?
-----------------------------------------

Từ kết quả build network (file: bipartite_graph.gpickle):

A. Số nodes và edges:
- Tổng nodes: 20,770
  • Customer nodes: 20,652 (99.4%)
  • Product nodes: 118 (0.6%)
- Tổng edges: 101,196 (unique customer-product pairs)
  • Từ 180,519 transactions → 101,196 unique edges
  • Tức là có nhiều customers mua lại cùng product nhiều lần

B. Connected hay không?
- Network KHÔNG connected (disconnected)
- Lý do: không phải tất cả customers đều mua tất cả products
- Có nhiều "islands" nhỏ (customers chỉ mua products cụ thể)

C. Số components:
- Tổng: 19 connected components
- Largest component: 12,431 nodes (~60% của toàn bộ network)
  • Component lớn này chứa hầu hết customers và products phổ biến
- 18 components còn lại: nhỏ, isolated (customers mua products ít phổ biến)

D. Density (mật độ kết nối):
- Density: 0.000469 (rất thấp - sparse network)
- Giải thích: 
  • Maximum possible edges = 20,652 customers × 118 products = 2,436,936
  • Actual edges = 101,196
  • Density = 101,196 / 2,436,936 ≈ 0.0415 = 4.15%
  
- Ý nghĩa: Network rất sparse (khách hàng không mua tất cả products)
  → Điều này TỐT cho fraud detection vì:
     • Fraud patterns sẽ nổi bật hơn
     • Centrality measures có ý nghĩa phân biệt
     • Community detection hiệu quả

-----------------------------------------
Q2.3: Phân bố degree như thế nào?
-----------------------------------------

Từ kết quả network statistics:

A. Customer degree distribution:
- Average customer degree: 4.90 products/customer
- Min: 1 product (customers mua ít)
- Max: 17 products (customers mua nhiều nhất)
- Phân bố:
  • Hầu hết customers: mua 1-5 products (typical users)
  • Một số customers: mua 6-10 products (regular users)
  • Rất ít customers: mua >10 products (power users / potential fraud)

→ Phân bố RIGHT-SKEWED: nhiều customers mua ít, ít customers mua nhiều

B. Product degree distribution:
- Average product degree: 857.59 customers/product
- Min: ít customers (products không phổ biến)
- Max: 10,046 customers cho product P_365 (best-seller!)
- Top 5 products phổ biến nhất:
  1. P_365: 10,046 customers
  2. P_403: 9,717 customers
  3. P_502: 9,468 customers
  4. P_1014: 9,134 customers
  5. P_1004: 8,759 customers

→ Phân bố HIGHLY SKEWED: một vài products cực kỳ phổ biến, nhiều products ít người mua

C. Có power-law distribution không?
- CÓ! Network có đặc điểm power-law (scale-free):
  
  Customer side:
  • Nhiều nodes có degree thấp (1-5 products)
  • Ít nodes có degree cao (10-17 products)
  • Fraud customers có xu hướng degree CAO HƠN:
    - Fraud avg degree: 7.40
    - Normal avg degree: 4.71
  
  Product side:
  • Một số ít products có degree CỰC CAO (8,000-10,000 customers)
  • Đây là "hubs" trong network
  • Phù hợp với lý thuyết về popular products trong retail

→ Power-law distribution là SIGNAL QUAN TRỌNG:
   • Có thể dùng để detect anomalies
   • Fraud customers thường có degree cao bất thường
   • Hoặc mua products không phổ biến (degree thấp)

D. Ý nghĩa cho fraud detection:
- Customers có degree quá cao (>10) → suspicious
- Customers mua products quá niche → suspicious
- Customers trong communities nhỏ, isolated → suspicious
- Degree distribution giúp xác định "normal behavior baseline"


